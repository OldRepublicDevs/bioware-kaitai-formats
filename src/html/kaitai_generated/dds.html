
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>Dds format specification</title>
  </head>
  <body>
           <div class="container">
  <h1>Dds format specification</h1>

      
<a name='type-dds'></a>
<h1>Type: Dds</h1>

<p>DDS (DirectDraw Surface) files appear in two variants in KotOR:

1. Standard DirectX DDS: Header magic "DDS " (0x44445320), 124-byte header
2. BioWare DDS variant: No magic; width/height/bpp/dataSize leading integers

DDS files support DXT1/DXT3/DXT5 block compression, uncompressed RGB/RGBA,
and various other pixel formats. They can include mipmaps and cube maps.

References:
- https://github.com/OldRepublicDevs/PyKotor/wiki/DDS-File-Format.md - Complete DDS format documentation
- Standard DirectX DDS format specification
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>magic</td>
<td>str(ASCII)</td>
<td>File magic. Either "DDS " (0x44445320) for standard DDS,
or check for BioWare variant (no magic, starts with width/height).
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>header</td>
<td><a href="#type-dds-dds_header">DdsHeader</a></td>
<td>Standard DDS header (124 bytes) - only present if magic is "DDS "</td>
</tr>
<tr>
<td>128</td>
<td>...</td>
<td>bioware_header</td>
<td><a href="#type-dds-bioware_dds_header">BiowareDdsHeader</a></td>
<td>BioWare DDS variant header - only present if magic is not "DDS "</td>
</tr>
<tr>
<td>148</td>
<td>...</td>
<td>pixel_data</td>
<td>u1</td>
<td>Pixel data (compressed or uncompressed).
For standard DDS: Format determined by DDPIXELFORMAT
For BioWare DDS: DXT1 or DXT5 compressed data
</td>
</tr>
</table>
<a name='type-dds-bioware_dds_header'></a>
<h2>Type: BiowareDdsHeader</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>width</td>
<td>u4le</td>
<td>Image width in pixels (must be power of two, < 0x8000)</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>height</td>
<td>u4le</td>
<td>Image height in pixels (must be power of two, < 0x8000)</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>bytes_per_pixel</td>
<td>u4le</td>
<td>Bytes per pixel:
- 3 = DXT1 compression
- 4 = DXT5 compression
</td>
</tr>
<tr>
<td>12</td>
<td>...</td>
<td>data_size</td>
<td>u4le</td>
<td>Total compressed data size.
Must match (width*height)/2 for DXT1 or width*height for DXT5
</td>
</tr>
<tr>
<td>16</td>
<td>...</td>
<td>unused_float</td>
<td>f4le</td>
<td>Unused float field (typically 0.0)</td>
</tr>
</table>
<a name='type-dds-ddpixelformat'></a>
<h2>Type: Ddpixelformat</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>size</td>
<td>u4le</td>
<td>Structure size (must be 32)</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>flags</td>
<td>u4le</td>
<td>Pixel format flags:
- 0x00000001 = DDPF_ALPHAPIXELS
- 0x00000002 = DDPF_ALPHA
- 0x00000004 = DDPF_FOURCC
- 0x00000040 = DDPF_RGB
- 0x00000200 = DDPF_YUV
- 0x00080000 = DDPF_LUMINANCE
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>fourcc</td>
<td>str(ASCII)</td>
<td>Four-character code for compressed formats:
- "DXT1" = DXT1 compression
- "DXT3" = DXT3 compression
- "DXT5" = DXT5 compression
- "    " = Uncompressed format
</td>
</tr>
<tr>
<td>12</td>
<td>...</td>
<td>rgb_bit_count</td>
<td>u4le</td>
<td>Bits per pixel for uncompressed formats (16, 24, or 32)</td>
</tr>
<tr>
<td>16</td>
<td>...</td>
<td>r_bit_mask</td>
<td>u4le</td>
<td>Red channel bit mask (for uncompressed formats)</td>
</tr>
<tr>
<td>20</td>
<td>...</td>
<td>g_bit_mask</td>
<td>u4le</td>
<td>Green channel bit mask (for uncompressed formats)</td>
</tr>
<tr>
<td>24</td>
<td>...</td>
<td>b_bit_mask</td>
<td>u4le</td>
<td>Blue channel bit mask (for uncompressed formats)</td>
</tr>
<tr>
<td>28</td>
<td>...</td>
<td>a_bit_mask</td>
<td>u4le</td>
<td>Alpha channel bit mask (for uncompressed formats)</td>
</tr>
</table>
<a name='type-dds-dds_header'></a>
<h2>Type: DdsHeader</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>size</td>
<td>u4le</td>
<td>Header size (must be 124)</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>flags</td>
<td>u4le</td>
<td>DDS flags bitfield:
- 0x00001007 = DDSD_CAPS | DDSD_HEIGHT | DDSD_WIDTH | DDSD_PIXELFORMAT
- 0x00020000 = DDSD_MIPMAPCOUNT (if mipmaps present)
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>height</td>
<td>u4le</td>
<td>Image height in pixels</td>
</tr>
<tr>
<td>12</td>
<td>...</td>
<td>width</td>
<td>u4le</td>
<td>Image width in pixels</td>
</tr>
<tr>
<td>16</td>
<td>...</td>
<td>pitch_or_linear_size</td>
<td>u4le</td>
<td>Pitch (uncompressed) or linear size (compressed).
For compressed formats: total size of all mip levels
</td>
</tr>
<tr>
<td>20</td>
<td>...</td>
<td>depth</td>
<td>u4le</td>
<td>Depth for volume textures (usually 0 for 2D textures)</td>
</tr>
<tr>
<td>24</td>
<td>...</td>
<td>mipmap_count</td>
<td>u4le</td>
<td>Number of mipmap levels (0 or 1 = no mipmaps)</td>
</tr>
<tr>
<td>28</td>
<td>...</td>
<td>reserved1</td>
<td>u4le</td>
<td>Reserved fields (unused)</td>
</tr>
<tr>
<td>72</td>
<td>...</td>
<td>pixel_format</td>
<td><a href="#type-dds-ddpixelformat">Ddpixelformat</a></td>
<td>Pixel format structure</td>
</tr>
<tr>
<td>104</td>
<td>...</td>
<td>caps</td>
<td>u4le</td>
<td>Capability flags:
- 0x00001000 = DDSCAPS_TEXTURE
- 0x00000008 = DDSCAPS_MIPMAP
- 0x00000200 = DDSCAPS2_CUBEMAP
</td>
</tr>
<tr>
<td>108</td>
<td>...</td>
<td>caps2</td>
<td>u4le</td>
<td>Additional capability flags:
- 0x00000200 = DDSCAPS2_CUBEMAP
- 0x00000FC00 = Cube map face flags
</td>
</tr>
<tr>
<td>112</td>
<td>...</td>
<td>caps3</td>
<td>u4le</td>
<td>Reserved capability flags</td>
</tr>
<tr>
<td>116</td>
<td>...</td>
<td>caps4</td>
<td>u4le</td>
<td>Reserved capability flags</td>
</tr>
<tr>
<td>120</td>
<td>...</td>
<td>reserved2</td>
<td>u4le</td>
<td>Reserved field</td>
</tr>
</table>

  </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
  </body>
</html>
      
