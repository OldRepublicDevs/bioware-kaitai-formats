
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>Ssf format specification</title>
  </head>
  <body>
           <div class="container">
  <h1>Ssf format specification</h1>

      
<a name='type-ssf'></a>
<h1>Type: Ssf</h1>

<p>SSF (Sound Set File) files store sound string references (StrRefs) for character voice sets.
Each SSF file contains exactly 28 sound slots, mapping to different game events and actions.

Binary Format:
- Header (12 bytes): File type signature, version, and offset to sounds array
- Sounds Array (112 bytes): 28 uint32 values representing StrRefs (0xFFFFFFFF = -1 = no sound)
- Padding (12 bytes): 3 uint32 values of 0xFFFFFFFF (reserved/unused)

Total file size: 136 bytes (12 + 112 + 12)

Sound Slots (in order):
0-5: Battle Cry 1-6
6-8: Select 1-3
9-11: Attack Grunt 1-3
12-13: Pain Grunt 1-2
14: Low Health
15: Dead
16: Critical Hit
17: Target Immune
18: Lay Mine
19: Disarm Mine
20: Begin Stealth
21: Begin Search
22: Begin Unlock
23: Unlock Failed
24: Unlock Success
25: Separated From Party
26: Rejoined Party
27: Poisoned

References:
- https://github.com/OldRepublicDevs/PyKotor/blob/master/Libraries/PyKotor/src/pykotor/resource/formats/ssf/ssf_binary_reader.py
- https://github.com/OldRepublicDevs/PyKotor/blob/master/Libraries/PyKotor/src/pykotor/resource/formats/ssf/ssf_binary_writer.py
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>file_type</td>
<td>str(ASCII)</td>
<td>File type signature. Must be "SSF " (space-padded).
Bytes: 0x53 0x53 0x46 0x20
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>file_version</td>
<td>str(ASCII)</td>
<td>File format version. Always "V1.1" for KotOR SSF files.
Bytes: 0x56 0x31 0x2E 0x31
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>sounds_offset</td>
<td>u4le</td>
<td>Byte offset to the sounds array from the beginning of the file.
Always 12 (0x0C) in valid SSF files, as the sounds array immediately follows the header.
This field exists for format consistency, though it's always the same value.
</td>
</tr>
<tr>
<td>12</td>
<td>...</td>
<td>padding</td>
<td><a href="#type-ssf-padding">Padding</a></td>
<td>Reserved padding bytes (12 bytes of 0xFFFFFFFF)</td>
</tr>
</table>
<p><b>Parse instance</b>: sounds</p>
<table class="table">
<tr>
<td>sounds_offset</td>
<td>...</td>
<td>sounds</td>
<td><a href="#type-ssf-sound_array">SoundArray</a></td>
<td>Array of 28 sound string references (StrRefs)</td>
</tr>
</table>
<a name='type-ssf-padding'></a>
<h2>Type: Padding</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>padding_bytes</td>
<td>u4le</td>
<td>Reserved padding bytes. Always 3 uint32 values of 0xFFFFFFFF.
Total size: 12 bytes (3 * 4 bytes).
These bytes are unused but must be present for format compatibility.
Each padding byte should be 0xFFFFFFFF (4294967295).
</td>
</tr>
</table>
<a name='type-ssf-sound_array'></a>
<h2>Type: SoundArray</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>entries</td>
<td><a href="#type-ssf-sound_entry">SoundEntry</a></td>
<td>Array of exactly 28 sound entries, one for each SSFSound enum value.
Each entry is a uint32 representing a StrRef (string reference).
Value 0xFFFFFFFF (4294967295) represents -1 (no sound assigned).

Entry indices map to SSFSound enum:
- 0-5: Battle Cry 1-6
- 6-8: Select 1-3
- 9-11: Attack Grunt 1-3
- 12-13: Pain Grunt 1-2
- 14: Low Health
- 15: Dead
- 16: Critical Hit
- 17: Target Immune
- 18: Lay Mine
- 19: Disarm Mine
- 20: Begin Stealth
- 21: Begin Search
- 22: Begin Unlock
- 23: Unlock Failed
- 24: Unlock Success
- 25: Separated From Party
- 26: Rejoined Party
- 27: Poisoned
</td>
</tr>
</table>
<a name='type-ssf-sound_entry'></a>
<h2>Type: SoundEntry</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>strref_raw</td>
<td>u4le</td>
<td>Raw uint32 value representing the StrRef.
Value 0xFFFFFFFF (4294967295) represents -1 (no sound assigned).
All other values are valid StrRefs (typically 0-999999).
The conversion from 0xFFFFFFFF to -1 is handled by SSFBinaryReader.ReadInt32MaxNeg1().
</td>
</tr>
</table>
value instance: ValueInstanceSpec(InstanceIdentifier(is_no_sound),List(types, sound_entry, instances, is_no_sound),Compare(Name(identifier(strref_raw)),Eq,IntNum(4294967295)),None,Some(CalcBooleanType),DocSpec(Some(True if this entry represents "no sound" (0xFFFFFFFF).
False if this entry contains a valid StrRef value.
),List()))

  </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
  </body>
</html>
      
