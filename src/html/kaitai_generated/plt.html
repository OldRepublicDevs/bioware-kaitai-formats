
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>Plt format specification</title>
  </head>
  <body>
           <div class="container">
  <h1>Plt format specification</h1>

      
<a name='type-plt'></a>
<h1>Type: Plt</h1>

<p>PLT (Palette Texture) is a texture format used in Neverwinter Nights that allows runtime color
palette selection. Instead of fixed colors, PLT files store palette group indices and color indices
that reference external palette files, enabling dynamic color customization for character models
(skin, hair, armor colors, etc.).

**Note**: This format is Neverwinter Nights-specific and is NOT used in KotOR games. While the PLT
resource type (0x0006) exists in KotOR's resource system due to shared Aurora engine heritage, KotOR
does not load, parse, or use PLT files. KotOR uses standard TPC/TGA/DDS textures for all textures,
including character models. This documentation is provided for reference only.

Binary Format Structure:
- Header (24 bytes): Signature, Version, Unknown fields, Width, Height
- Pixel Data: Array of 2-byte pixel entries (color index + palette group index)

Palette System:
PLT files work in conjunction with external palette files (.pal files) that contain the actual
color values. The PLT file itself stores:
1. Palette Group index (0-9): Which palette group to use for each pixel
2. Color index (0-255): Which color within the selected palette to use

At runtime, the game:
1. Loads the appropriate palette file for the selected palette group
2. Uses the palette index (supplied by the content creator) to select a row in the palette file
3. Uses the color index from the PLT file to retrieve the final color value

Palette Groups (10 total):
0 = Skin, 1 = Hair, 2 = Metal 1, 3 = Metal 2, 4 = Cloth 1, 5 = Cloth 2,
6 = Leather 1, 7 = Leather 2, 8 = Tattoo 1, 9 = Tattoo 2

References:
- https://github.com/OldRepublicDevs/PyKotor/wiki/PLT-File-Format.md
- https://github.com/xoreos/xoreos-docs/blob/master/specs/torlack/plt.html
- https://github.com/xoreos/xoreos/blob/master/src/graphics/aurora/pltfile.cpp
</p>
<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>header</td>
<td><a href="#type-plt-plt_header">PltHeader</a></td>
<td>PLT file header (24 bytes)</td>
</tr>
<tr>
<td>24</td>
<td>...</td>
<td>pixel_data</td>
<td><a href="#type-plt-pixel_data_section">PixelDataSection</a></td>
<td>Array of pixel entries (width × height entries, 2 bytes each)</td>
</tr>
</table>
<a name='type-plt-pixel_data_section'></a>
<h2>Type: PixelDataSection</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>pixels</td>
<td><a href="#type-plt-plt_pixel">PltPixel</a></td>
<td>Array of pixel entries, stored row by row, left to right, top to bottom.
Total size = width × height × 2 bytes.
Each pixel entry contains a color index and palette group index.
</td>
</tr>
</table>
<a name='type-plt-plt_header'></a>
<h2>Type: PltHeader</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>signature</td>
<td>str(ASCII)</td>
<td>File signature. Must be "PLT " (space-padded).
This identifies the file as a PLT palette texture.
</td>
</tr>
<tr>
<td>4</td>
<td>...</td>
<td>version</td>
<td>str(ASCII)</td>
<td>File format version. Must be "V1  " (space-padded).
This is the only known version of the PLT format.
</td>
</tr>
<tr>
<td>8</td>
<td>...</td>
<td>unknown1</td>
<td>u4le</td>
<td>Unknown field (4 bytes).
Purpose is unknown, may be reserved for future use or internal engine flags.
</td>
</tr>
<tr>
<td>12</td>
<td>...</td>
<td>unknown2</td>
<td>u4le</td>
<td>Unknown field (4 bytes).
Purpose is unknown, may be reserved for future use or internal engine flags.
</td>
</tr>
<tr>
<td>16</td>
<td>...</td>
<td>width</td>
<td>u4le</td>
<td>Texture width in pixels (uint32).
Used to calculate the number of pixel entries in the pixel data section.
</td>
</tr>
<tr>
<td>20</td>
<td>...</td>
<td>height</td>
<td>u4le</td>
<td>Texture height in pixels (uint32).
Used to calculate the number of pixel entries in the pixel data section.
Total pixel count = width × height
</td>
</tr>
</table>
<a name='type-plt-plt_pixel'></a>
<h2>Type: PltPixel</h2>

<table class="table">
<tr><th>Offset</th><th>Size</th><th>ID</th><th>Type</th><th>Note</th></tr>
<tr>
<td>0</td>
<td>...</td>
<td>color_index</td>
<td>u1</td>
<td>Color index (0-255) within the selected palette.
This value selects which color from the palette file row to use.
The palette file contains 256 rows (one for each palette index 0-255),
and each row contains 256 color values (one for each color index 0-255).
</td>
</tr>
<tr>
<td>1</td>
<td>...</td>
<td>palette_group_index</td>
<td>u1</td>
<td>Palette group index (0-9) that determines which palette file to use.
Palette groups:
0 = Skin (pal_skin01.jpg)
1 = Hair (pal_hair01.jpg)
2 = Metal 1 (pal_armor01.jpg)
3 = Metal 2 (pal_armor02.jpg)
4 = Cloth 1 (pal_cloth01.jpg)
5 = Cloth 2 (pal_cloth01.jpg)
6 = Leather 1 (pal_leath01.jpg)
7 = Leather 2 (pal_leath01.jpg)
8 = Tattoo 1 (pal_tattoo01.jpg)
9 = Tattoo 2 (pal_tattoo01.jpg)
</td>
</tr>
</table>

  </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
  </body>
</html>
      
